" Functions for Rails tests

function RunCurrentTest()
  execute "!" . CorrectTestRunner() "--drb" expand("%:p")
endfunction

function RunCurrentLineInTest()
  execute "!" . CorrectTestRunner() "--drb" expand("%:p") . ":" . line(".")
endfunction

function CorrectTestRunner()
  if match(expand("%"), '\.feature$') != -1
    return "cucumber"
  elseif match(expand("%"), '_spec\.rb$') != -1
    return "rspec
  endif
endfunction

" vim:ft=vim

